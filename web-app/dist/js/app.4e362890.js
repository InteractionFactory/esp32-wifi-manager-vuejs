(function(t){function e(e){for(var i,o,r=e[0],c=e[1],l=e[2],u=0,p=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(p.length)p.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],i=!0,r=1;r<s.length;r++){var c=s[r];0!==n[c]&&(i=!1)}i&&(a.splice(e--,1),t=o(o.s=s[0]))}return t}var i={},n={app:0},a=[];function o(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=i,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(s,i,function(e){return t[e]}.bind(null,i));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=c;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var i=s("85ec"),n=s.n(i);n.a},"0531":function(t,e,s){"use strict";var i=s("4564"),n=s.n(i);n.a},4564:function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);var i=s("2b0e"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},a=[],o=(s("034f"),s("2877")),r={},c=Object(o["a"])(r,n,a,!1,null,null,null),l=c.exports,d=s("9483");Object(d["a"])("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var u=s("8c4f"),p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("b-container",{attrs:{fluid:""}},[s("b-card",{staticClass:"card-container mx-auto",attrs:{"header-class":"main-card-header",header:"WiFi Manager"}},[s("b-row",{staticStyle:{width:"80%",margin:"0 auto","padding-bottom":"15px"},attrs:{sm:"4","no-gutters":""}},[s("b-col",{},[s("div",{staticClass:"led-green",class:{"led-on":t.isDeviceConnected},staticStyle:{display:"inline-block",position:"relative",top:"2px"}}),t.isDeviceConnected?s("p",{staticStyle:{"margin-top":"0px","margin-bottom":"0px",display:"inline-block","padding-left":"10px"}},[t._v("Connected")]):s("p",{staticStyle:{"margin-top":"0px","margin-bottom":"0px",display:"inline-block","padding-left":"10px"}},[t._v("Not connected")]),t.isDeviceConnected?s("p",{staticStyle:{"margin-top":"0px","margin-bottom":"0px",display:"inline-block","padding-left":"10px"}},[t._v(t._s(t.macAddress))]):t._e()])],1),s("b-input-group",{staticClass:"input-ssid",scopedSlots:t._u([{key:"prepend",fn:function(){return[s("b-input-group-text",{staticClass:"input-ssid-label"},[t._v("SSID")])]},proxy:!0},{key:"append",fn:function(){return[s("b-dropdown",{attrs:{right:"",text:"Scan",variant:""},on:{show:t.scanNetworks}},[t._l(t.ssidList,(function(e){return s("b-dropdown-item",{key:e,on:{click:function(s){return t.setSsid(e)}}},[t._v(t._s(e))])})),s("div",{staticClass:"text-center"},[t.isScanning?s("b-spinner",{attrs:{type:"grow",variant:"primary",label:"Text Centered"}}):t._e()],1)],2)]},proxy:!0}])},[s("b-form-input",{model:{value:t.ssid,callback:function(e){t.ssid=e},expression:"ssid"}})],1),s("b-input-group",{staticClass:"input-password",scopedSlots:t._u([{key:"prepend",fn:function(){return[s("b-input-group-text",[t._v("Password")])]},proxy:!0},{key:"append",fn:function(){return[s("b-button",{attrs:{variant:""},on:{click:t.togglePassField}},[t.togglePass?s("b-icon",{attrs:{icon:"eye-slash"}}):t._e(),t.togglePass?t._e():s("b-icon",{attrs:{icon:"eye"}})],1)]},proxy:!0}])},[s("b-form-input",{attrs:{type:t.passType},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),s("b-form-checkbox",{staticStyle:{position:"left","padding-bottom":"10px"},attrs:{name:"check-button",switch:"",size:"lg"},model:{value:t.isStaticIp,callback:function(e){t.isStaticIp=e},expression:"isStaticIp"}},[t._v(" Static IP ")]),s("transition",{attrs:{name:"fade"}},[t.isStaticIp?s("div",[s("b-input-group",{staticClass:"input-ipaddress",scopedSlots:t._u([{key:"prepend",fn:function(){return[s("b-input-group-text",[t._v("IP Addr")])]},proxy:!0}],null,!1,3164713251)},[s("b-form-input",{model:{value:t.staticIp,callback:function(e){t.staticIp=e},expression:"staticIp"}})],1),s("b-input-group",{staticClass:"input-netmask",scopedSlots:t._u([{key:"prepend",fn:function(){return[s("b-input-group-text",[t._v("Netmask")])]},proxy:!0}],null,!1,592667746)},[s("b-form-input",{model:{value:t.netmask,callback:function(e){t.netmask=e},expression:"netmask"}})],1),s("b-input-group",{staticClass:"input-gateway",scopedSlots:t._u([{key:"prepend",fn:function(){return[s("b-input-group-text",[t._v("Gateway")])]},proxy:!0}],null,!1,2744400177)},[s("b-form-input",{model:{value:t.gateway,callback:function(e){t.gateway=e},expression:"gateway"}})],1)],1):t._e()]),s("b-row",{staticStyle:{position:"absolute",bottom:"20px",width:"90%",margin:"0 auto"},attrs:{"no-gutters":""}},[s("b-col",[s("b-button",{staticStyle:{"min-width":"5rem"},on:{click:function(e){return t.$bvModal.show("modal-save")}}},[t._v("Save")])],1),s("b-col",[s("b-button",{staticStyle:{"min-width":"5rem"},on:{click:function(e){return t.$bvModal.show("modal-test-wifi")}}},[t._v("Test WiFi")])],1),s("b-col",[s("b-button",{staticStyle:{"min-width":"5rem"},on:{click:function(e){return t.$bvModal.show("modal-erase")}}},[t._v("Erase")])],1),s("b-col",[s("b-button",{staticStyle:{"min-width":"5rem"},on:{click:function(e){return t.$bvModal.show("modal-start")}}},[t._v("Start")])],1)],1)],1)],1),s("b-modal",{attrs:{size:"xsm",id:"modal-save",centered:"","hide-header":""},on:{ok:t.modalSaveOk,cancel:t.modalEraseCancel},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var i=e.ok,n=e.cancel;return[s("b-button",{attrs:{size:"sm",variant:"success"},on:{click:function(t){return i()}}},[t._v(" OK ")]),s("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(t){return n()}}},[t._v(" Cancel ")])]}}])},[s("div",{staticClass:"d-block text-center"},[t.isSaving?t._e():s("p",[t._v("Are you sure you want to save WiFi configuration?")]),s("div",{staticClass:"text-center"},[t.isSaving?s("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{type:"grow",variant:"primary",label:"Text Centered"}}):t._e()],1)])]),s("b-modal",{attrs:{size:"xsm",id:"modal-test-wifi",centered:"","hide-header":""},on:{ok:t.modalTestOk,cancel:t.modalTestCancel},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var i=e.ok,n=e.cancel;return[s("b-button",{attrs:{size:"sm",variant:"success"},on:{click:function(t){return i()}}},[t._v(" OK ")]),s("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(t){return n()}}},[t._v(" Cancel ")])]}}])},[s("div",{staticClass:"d-block text-center"},[t.isTestingWifi?t._e():s("p",[t._v("This will test WiFi connection")]),s("div",{staticClass:"text-center"},[t.isTestingWifi?s("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{type:"grow",variant:"primary",label:"Text Centered"}}):t._e()],1)])]),s("b-modal",{attrs:{size:"xsm",id:"modal-erase",centered:"","hide-header":""},on:{ok:t.modalEraseOk,cancel:t.modalEraseCancel},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var i=e.ok,n=e.cancel;return[s("b-button",{attrs:{size:"sm",variant:"success"},on:{click:function(t){return i()}}},[t._v(" OK ")]),s("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(t){return n()}}},[t._v(" Cancel ")])]}}])},[s("div",{staticClass:"d-block text-center"},[t.isErasing?t._e():s("p",[t._v("Are you sure you want to erase current WiFi configuration?")]),s("div",{staticClass:"text-center"},[t.isErasing?s("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{type:"grow",variant:"primary",label:"Text Centered"}}):t._e()],1)])]),s("b-modal",{attrs:{size:"xsm",id:"modal-start",centered:"","hide-header":""},on:{ok:t.modalStartDeviceOk,cancel:t.modalStartDeviceCancel},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var i=e.ok,n=e.cancel;return[s("b-button",{attrs:{size:"sm",variant:"success"},on:{click:function(t){return i()}}},[t._v(" OK ")]),s("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(t){return n()}}},[t._v(" Cancel ")])]}}])},[s("div",{staticClass:"d-block text-center"},[t.isErasing?t._e():s("p",[t._v("Are you sure you want to start your device?")]),s("div",{staticClass:"text-center"},[t.isErasing?s("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{type:"grow",variant:"primary",label:"Text Centered"}}):t._e()],1)])]),s("b-modal",{attrs:{size:"xsm",id:"modal-running-task",centered:"","hide-footer":"","hide-header":"","no-close-on-backdrop":""}},[s("div",{staticClass:"d-block text-center"},[s("p",{directives:[{name:"modal",rawName:"v-modal",value:t.taskStatus,expression:"taskStatus"}]},[t._v(t._s(t.taskStatus))]),s("div",{staticClass:"text-center"},[t.isTaskRunning?s("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{type:"grow",variant:"primary",label:"Text Centered"}}):t._e()],1)]),t.isTaskRunning?t._e():s("b-button",{staticClass:"mt-1",attrs:{block:""},on:{click:function(e){return t.$bvModal.hide("modal-running-task")}}},[t._v("Ok")])],1)],1)},g=[],h={name:"Main",components:{},data(){return{socket:null,togglePass:!1,isStaticIp:!1,isDeviceConnected:!1,isScanning:!0,isTestingWifi:!1,isErasing:!1,isSaving:!1,isSaveOk:!1,isWifiOk:!1,isTaskRunning:!1,isWebSocketAlive:!1,lastPongTime:"",timeNow:"",ssid:"",password:"",staticIp:"",netmask:"",gateway:"",passType:"password",ssidList:"",macAddress:"",taskStatus:""}},mounted(){console.log(this.$socket.url),this.$options.sockets.onopen=t=>{console.log("Server: "+t.type),this.isWebSocketAlive=!0},this.$options.sockets.onclose=t=>{console.log("Server: "+t),this.isDeviceConnected=!1,this.macAddress="",this.isWebSocketAlive=!1},this.$options.sockets.onmessage=t=>{console.log("Server: ",t.data);var e=JSON.parse(t.data);switch(console.log(Object.keys(e)[0]),Object.keys(e)[0]){case"deviceInfo":console.log(e["deviceInfo"]),this.macAddress=e["deviceInfo"]["macAddress"],this.ssid=e["deviceInfo"]["ssid"],this.password=e["deviceInfo"]["password"],this.isStaticIp=e["deviceInfo"]["isStaticIp"],this.staticIp=e["deviceInfo"]["staticIp"],this.netmask=e["deviceInfo"]["netmask"],this.gateway=e["deviceInfo"]["gateway"],this.isDeviceConnected=!0,this.isWebSocketAlive=!0,this.lastPongTime=Date.now();break;case"ssidArray":console.log(e["ssidArray"]),this.ssidList=e["ssidArray"],this.isScanning=!1,this.isWebSocketAlive=!0,this.isDeviceConnected=!0;break;case"macAddress":this.isDeviceConnected=!0,this.isWebSocketAlive=!0,this.lastPongTime=Date.now(),this.macAddress=e["macAddress"];break;case"wifiTestOk":this.isWifiOk=e["wifiTestOk"],this.isTestingWifi=!1,this.isTaskRunning=!1,this.taskStatus="WiFi OK";break;case"saveOk":this.isSaveOk=e["saveOk"],this.isSaving=!1,this.isTaskRunning=!1,this.taskStatus="Save OK";break;case"eraseOk":this.isWifiOk=e["eraseOk"],this.isErasing=!1,this.isTaskRunning=!1,this.taskStatus="Erase OK",this.ssid="",this.password="",this.isStaticIp=!1,this.staticIp="",this.netmask="",this.gateway="";break;case"startDeviceOk":this.isWifiOk=e["startDeviceOk"],this.isTaskRunning=!1,this.taskStatus="Device started!";break;case"wifiTestError":this.isWifiOk=!1,this.isTestingWifi=!1,this.isTaskRunning=!1,this.taskStatus=e["error"];break;case"eraseDataOk":this.isTaskRunning=!1,this.taskStatus="Data erased";break;case"pong":this.isWebSocketAlive=e["pong"],this.lastPongTime=Date.now();break}},window.setInterval(()=>{console.log("checking connection"),this.$socket.send("ping")},3e3),window.setInterval(()=>{console.log("checking last pong time"),this.timeNow=Date.now(),console.log("Last pong time: "+this.lastPongTime),console.log("Epoch time: "+this.timeNow),this.timeNow-this.lastPongTime>6e3&&(console.log("LAST PONG TIME GREATER"),this.isDeviceConnected=!1,this.isWebSocketAlive=!1,this.macAddress="")},200)},methods:{togglePassField:function(){this.togglePass=!this.togglePass,this.togglePass?this.passType="text":this.passType="password",console.log(this.passType)},setSsid:function(t){console.log(t),this.ssid=t},modalSaveOk:function(t){console.log(t.trigger),this.$bvModal.show("modal-running-task"),this.taskStatus="Saving to device...",this.isTaskRunning=!0,this.isSaving=!0;var e={deviceConfiguration:{ssid:this.ssid,password:this.password,isStaticIp:this.isStaticIp,staticIp:this.staticIp,netmask:this.netmask,gateway:this.gateway}};console.log(e),this.$socket.send(JSON.stringify(e))},modalTestOk:function(t){console.log(t.trigger),this.$bvModal.show("modal-running-task"),this.taskStatus="Testing WiFi connection...",this.isTaskRunning=!0,this.isTestingWifi=!0;var e={wifiParameters:{ssid:this.ssid,password:this.password,isStaticIp:this.isStaticIp,staticIp:this.staticIp,netmask:this.netmask,gateway:this.gateway}};console.log(e),this.$socket.send(JSON.stringify(e))},modalTestCancel:function(t){console.log(t.trigger),this.isTaskRunning=!1,this.isTestingWifi=!1},modalEraseOk:function(t){this.$bvModal.show("modal-running-task"),this.taskStatus="Erasing current WiFi data...",this.isTaskRunning=!0,console.log(t.trigger),this.$socket.send("eraseConfig"),this.isErasing=!0},modalEraseCancel:function(t){console.log(t.trigger),this.isTaskRunning=!1},modalStartDeviceOk:function(t){console.log(t.trigger),this.$bvModal.show("modal-running-task"),this.taskStatus="Starting device...",this.isTaskRunning=!0;var e={startDevice:{ssid:this.ssid,password:this.password,isStaticIp:this.isStaticIp,staticIp:this.staticIp,netmask:this.netmask,gateway:this.gateway}};console.log(e),this.$socket.send(JSON.stringify(e))},modalStartDeviceCancel:function(t){console.log(t.trigger),this.isTaskRunning=!1},scanNetworks:function(){console.log("scanNetworks"),this.ssidList="",this.isScanning=!0,this.$socket.send("scanNetworks")}}},v=h,f=(s("0531"),s("b4fe"),Object(o["a"])(v,p,g,!1,null,"173cf4ce",null)),k=f.exports;i["default"].use(u["a"]);const m=[{path:"/",name:"Main",component:k}],b=new u["a"]({routes:m});var w=b,y=s("5f5b"),S=s("b1e0"),x=s("b408"),_=s.n(x);s("f9e3"),s("2dd8");i["default"].use(y["a"]),i["default"].use(S["a"]),i["default"].use(_.a,"ws://192.168.4.1:9090",{reconnection:!0,reconnectionAttempts:5,reconnectionDelay:2e3}),i["default"].config.productionTip=!1,new i["default"]({router:w,render:function(t){return t(l)}}).$mount("#app")},"85ec":function(t,e,s){},b4fe:function(t,e,s){"use strict";var i=s("ba74"),n=s.n(i);n.a},ba74:function(t,e,s){}});
//# sourceMappingURL=app.4e362890.js.map